<!DOCTYPE html>
<html lang="ko">
<head>
  <!-- í•„ìˆ˜ ë©”íƒ€ -->
  <meta charset="UTF-8" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1"
  />
  <title>í™©ê°ì œ í…ŒìŠ¤íŠ¸ ê²°ê³¼</title>

  <!-- SEO/ë¸Œë¼ìš°ì € ê¸°ë³¸ ì„¤ì • -->
  <!-- ë¸Œë¼ìš°ì € ìƒë‹¨ ì£¼ì†Œì°½ í…Œë§ˆìƒ‰: ì•ˆë“œë¡œì´ë“œ í¬ë¡¬ ë“± -->
  <meta name="theme-color" content="#fb923c" />

  <!-- ì •ê·œí™” URL: ë°°í¬ ë„ë©”ì¸ìœ¼ë¡œ êµì²´ -->
  <link rel="canonical" href="https://example.com/result.html" />

  <!-- íŒŒë¹„ì½˜: í”„ë¡œì íŠ¸ì— ë§ì¶° êµì²´ -->
  <link rel="icon" href="/favicon.ico" sizes="any" />
  <link rel="icon" href="/icon.svg" type="image/svg+xml" />
  <link rel="apple-touch-icon" href="/apple-touch-icon.png" />

  <!-- Open Graph / Twitter ì¹´ë“œ: SNS ê³µìœ  ë¯¸ë¦¬ë³´ê¸°ìš©
       ì£¼ì˜: í´ë¼ì´ì–¸íŠ¸ JSë¡œ ë™ì ìœ¼ë¡œ ë°”ê¾¸ê¸° ì–´ë µë‹¤.
       íƒ€ì…ë³„ OG ì´ë¯¸ì§€ë¥¼ ë…¸ì¶œí•˜ë ¤ë©´ SSR(ì„œë²„ í”„ë¦¬ë Œë”) ë˜ëŠ” ì •ì  ë¹Œë“œê°€ í•„ìš” -->
  <meta property="og:title" content="í™©ê°ì œ MBTI í…ŒìŠ¤íŠ¸ ê²°ê³¼" />
  <meta
    property="og:description"
    content="ë‚˜ì˜ í™©ê°ì œ MBTI ê²°ê³¼ë¥¼ í™•ì¸í•˜ê³  ì¹œêµ¬ë“¤ê³¼ ê³µìœ í•˜ì„¸ìš”."
  />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="cards/preview.png" />
  <meta name="twitter:card" content="summary_large_image" />

  <!-- Tailwind CDN: í”„ë¡œë•ì…˜ì—ì„  ìì²´ ë¹Œë“œ ê¶Œì¥ -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- ëª¨ì…˜ ìµœì†Œí™”: ì‹œê° ë¯¼ê° ì‚¬ìš©ì ê³ ë ¤ -->
  <style>
    @media (prefers-reduced-motion: reduce) {
      .animate-bounce {
        animation: none !important;
      }
    }
  </style>
</head>

<!--
  ë ˆì´ì•„ì›ƒ:
  - í™”ë©´ ì¤‘ì•™ ì •ë ¬
  - ê·¸ë¼ë””ì–¸íŠ¸ ë°°ê²½
  - ë‹¤í¬ëª¨ë“œ í´ë˜ìŠ¤(.dark) ì§€ì›
-->
<body
  class="flex items-center justify-center min-h-screen bg-gradient-to-br from-orange-100 to-green-100 dark:from-neutral-900 dark:to-neutral-800 font-sans p-4"
>
  <!-- ê²°ê³¼ ì¹´ë“œ ì»¨í…Œì´ë„ˆ -->
  <div
    class="bg-white dark:bg-neutral-900 dark:text-neutral-100 p-8 rounded-3xl shadow-2xl w-[95%] max-w-xl text-center border-4 border-orange-300 dark:border-neutral-700"
  >
    <!-- ì¥ì‹ìš© ì´ëª¨ì§€. ìŠ¤í¬ë¦°ë¦¬ë” ë¹„ë…¸ì¶œ -->
    <div class="text-7xl mb-4 animate-bounce" aria-hidden="true">ğŸŠ</div>

    <!-- í˜ì´ì§€ íƒ€ì´í‹€ -->
    <h1 class="text-3xl font-extrabold text-orange-500 dark:text-orange-400 mb-6">
      ë‹¹ì‹ ì˜ MBTI ê²°ê³¼
    </h1>

    <!-- ê²°ê³¼ ì œëª©: ì‹¤ì‹œê°„ ê°±ì‹ ë˜ë¯€ë¡œ ë³´ì¡°ê³µí•™ì—ê²Œ ìƒíƒœë³€ê²½ ì•Œë¦¼ -->
    <div
      id="result-text"
      class="text-2xl text-gray-800 dark:text-neutral-100 font-bold mb-3"
      role="status"
      aria-live="polite"
    ></div>

    <!-- ê²°ê³¼ ì„¤ëª… -->
    <div
      id="result-desc"
      class="text-base text-gray-700 dark:text-neutral-300 leading-relaxed mb-6"
    ></div>

    <!-- ê²°ê³¼ ì´ë¯¸ì§€: ì§€ì—° ë¡œë”© + ì‹¤íŒ¨ í´ë°± -->
  <!-- ê²°ê³¼ ì´ë¯¸ì§€ -->
<img
  id="result-img"
  src=""
  alt="MBTI ê²°ê³¼ ì¹´ë“œ"
  loading="lazy"
  class="mx-auto w-64 rounded-xl shadow-md border-2 border-orange-200 dark:border-neutral-700 mb-6"
/>
<!-- ì´ë¯¸ì§€ ì„¤ëª… (ì‚¬ì§„ ì•„ë˜ í…ìŠ¤íŠ¸) -->
<div
  id="result-caption"
  class="text-sm text-gray-600 dark:text-neutral-400 italic mb-6"
></div>


    <!-- ë²„íŠ¼ ì˜ì—­ -->
    <div class="space-y-3">
      <!-- ë‹¤ì‹œ í…ŒìŠ¤íŠ¸í•˜ê¸° -->
      <button
        type="button"
        id="retakeBtn"
        class="w-full py-3 bg-orange-400 text-white text-lg font-semibold rounded-xl shadow-md hover:bg-orange-500 hover:scale-105 transition transform duration-300 focus:outline-none focus-visible:ring-4 focus-visible:ring-orange-300"
        aria-label="ë‹¤ì‹œ í…ŒìŠ¤íŠ¸í•˜ê¸°ë¡œ ì´ë™"
      >
        ë‹¤ì‹œ í…ŒìŠ¤íŠ¸í•˜ê¸° ğŸŠ
      </button>

      <!-- ê²°ê³¼ ê³µìœ í•˜ê¸°: Web Share API ìš°ì„  -->
      <button
        type="button"
        id="shareBtn"
        class="w-full py-3 bg-green-500 text-white text-lg font-semibold rounded-xl shadow-md hover:bg-green-600 hover:scale-105 transition transform duration-300 focus:outline-none focus-visible:ring-4 focus-visible:ring-green-300"
        aria-label="ê²°ê³¼ë¥¼ ê³µìœ í•˜ê¸°"
      >
        ê²°ê³¼ ê³µìœ í•˜ê¸° ğŸ“¤
      </button>

      <!-- ë§í¬ ë³µì‚¬í•˜ê¸°: ëª¨ë“  í™˜ê²½ ë°±ì—… -->
      <button
        type="button"
        id="copyBtn"
        class="w-full py-3 bg-gray-200 dark:bg-neutral-800 text-gray-800 dark:text-neutral-100 text-sm font-medium rounded-xl hover:bg-gray-300 dark:hover:bg-neutral-700 transition focus:outline-none focus-visible:ring-4 focus-visible:ring-gray-300"
        aria-label="ê³µìœ  ë§í¬ ë³µì‚¬"
      >
        ë§í¬ ë³µì‚¬í•˜ê¸° ğŸ”—
      </button>
    </div>

    <!-- ìƒíƒœ/ì•ˆë‚´ ë©”ì‹œì§€ -->
    <p id="notice" class="text-xs text-gray-500 dark:text-neutral-400 mt-4"></p>
  </div>

  <script>
    /* ===============================
       0) ì´ˆê¸° ë‹¤í¬ëª¨ë“œ ë™ê¸°í™”
       - ì‹œìŠ¤í…œ ì„¤ì •ê³¼ ë™ê¸°í™”
       - í•„ìš”ì‹œ í† ê¸€ ë²„íŠ¼ì„ ì¶”ê°€í•´ ìˆ˜ë™ ì œì–´ ê°€ëŠ¥
       =============================== */
    (function initColorScheme() {
      const mq = window.matchMedia("(prefers-color-scheme: dark)");
      // ìµœì´ˆ ë°˜ì˜
      document.documentElement.classList.toggle("dark", mq.matches);
      // ë³€ê²½ ê°ì§€
      mq.addEventListener?.("change", (e) => {
        document.documentElement.classList.toggle("dark", e.matches);
      });
    })();

    /* ===============================
       1) ê²°ê³¼ ì •ì˜ ì‚¬ì „
       - í…ìŠ¤íŠ¸/ì„¤ëª…/ì´ë¯¸ì§€ ê²½ë¡œ
       - ì´ë¯¸ì§€ ê·œì¹™: cards/cardsTYPE.png
       =============================== */
    const RESULTS = {
  ESTJ: {
    text: "ì¤„ ì„¸ìš°ëŠ” ë°˜ì¥ ê·¤ ESTJ ğŸŠ",
    desc: "ì´ ê·¤ì€ ì •ë¦¬ì •ëˆì˜ ë‹¬ì¸! ì–¸ì œë‚˜ ì§ˆì„œë¥¼ ìœ ì§€í•˜ê³ , ì±…ì„ê° ê°•í•œ ì„±ê²©ì´ì—ìš”. íš¨ìœ¨ì ì´ê³  ê³„íšì ì¸ ì„±ê²©ìœ¼ë¡œ, ì–´ë–¤ ì¼ì´ë“  ì˜ ë§ˆë¬´ë¦¬í•˜ëŠ” íƒ€ì…ì…ë‹ˆë‹¤.",
    img: "cardsESTJ.png",
    caption: "ì–´ì§ˆëŸ¬ì§„ ì¼ì€ ë‚´ê²Œ ë§¡ê²¨! ë°˜ì¥ ê·¤ì´ ì •ë¦¬í•´ì¤„ê²Œ!"
  },
  ESFJ: {
    text: "í•œ ì¡°ê°ì”© ë‚˜ëˆ ì£¼ëŠ” ì²œì‚¬ ê·¤ ESFJ ğŸŠ",
    desc: "í•­ìƒ ì£¼ë³€ ì‚¬ëŒë“¤ì„ ì±™ê¸°ê³ , ë”°ëœ»í•œ ì—ë„ˆì§€ë¡œ ëª¨ë‘ì—ê²Œ ì‚¬ë‘ì„ ì£¼ëŠ” ê·¤. ì‚¬ëŒë“¤ê³¼ í•¨ê»˜ ìˆì„ ë•Œ ê°€ì¥ í–‰ë³µí•´í•˜ë©°, ì„¸ì‹¬í•˜ê²Œ ë°°ë ¤í•˜ëŠ” ì„±ê²©ì´ì—ìš”.",
    img: "cardsESFJ.png",
    caption: "ì•„ë‚Œ ì—†ì´ ì£¼ê³  ì‹¶ì–´, ë‚œ ì²œì‚¬ ê·¤ì´ë‹ˆê¹Œ!"
  },
  ENFJ: {
    text: "ë‹¬ë‹¬í•˜ê²Œ ì±™ê²¨ì£¼ëŠ” ì¸ìƒ ì½”ì¹˜ ê·¤ ENFJ ğŸŠ",
    desc: "í•­ìƒ ë‹¤ì •í•œ ì—ë„ˆì§€ë¡œ ì‚¬ëŒë“¤ì„ ì´ë„ëŠ” ê·¤. ë¦¬ë”ì‹­ì´ ê°•í•˜ê³ , ì‚¬ëŒë“¤ì˜ ë§ˆìŒì„ ì‚¬ë¡œì¡ëŠ” ë§¤ë ¥ì ì¸ ì„±ê²©ì„ ê°€ì¡Œì–´ìš”.",
    img: "cardsENFJ.png",
    caption: "í˜ë“  ì¼ ìˆë‹¤ê³ ? ê·¤ ë¨¹ìœ¼ë©´ì„œ ê°™ì´ ì–˜ê¸°í•´ë³´ì~"
  },
  ENFP: {
    text: "ë¹„íƒ€ë¯¼ C íŒ¡íŒ¡ ê·¤ ENFP ğŸŠ",
    desc: "ììœ ë¡œìš´ ì˜í˜¼, ìƒˆë¡œìš´ ê²½í—˜ì„ ì¶”êµ¬í•˜ë©° ì–¸ì œë‚˜ ëª¨í—˜ì„ ë– ë‚˜ëŠ” ê·¤. ìƒê°ë³´ë‹¤ ë” í° ì„¸ìƒì— ëŒ€í•œ í˜¸ê¸°ì‹¬ì´ ê°€ë“í•˜ê³ , ì°½ì˜ë ¥ ë„˜ì¹˜ëŠ” ì•„ì´ë””ì–´ë¡œ í•­ìƒ ìƒˆë¡œìš´ ì„¸ìƒì„ ë§Œë“¤ì–´ê°‘ë‹ˆë‹¤.",
    img: "cardsENFP.png",
    caption: "ì„¸ìƒ ì–´ë””ë“  ê°ˆ ì¤€ë¹„ ì™„ë£Œ! ë‹¤ë¥¸ ê·¤ë“¤ê³¼ í•¨ê»˜ë¼ë©´!"
  },
  ISTJ: {
    text: "ë˜˜ë˜˜í•œ ëª¨ë²”ìƒ ê·¤ ISTJ ğŸŠ",
    desc: "ì²´ê³„ì ì´ê³  ì„¸ë°€í•œ ì„±ê²©ì„ ê°€ì§„ ê·¤. ëª¨ë“  ì¼ì„ ì •í™•í•˜ê³  ê¼¼ê¼¼í•˜ê²Œ ì²˜ë¦¬í•˜ë©°, í•­ìƒ ê·œì¹™ì„ ë”°ë¥´ëŠ” ì•ˆì •ì ì¸ ì„±ê²©ì´ì—ìš”.",
    img: "cardsISTJ.png",
    caption: "ì–¸ì œë‚˜ ê³„íšëŒ€ë¡œ! ì™„ë²½ì„ ì¶”êµ¬í•˜ëŠ” ê·¤ì´ ë ê±°ì•¼!"
  },
  ISFJ: {
    text: "ë’¤ì—ì„œ ì±™ê²¨ì£¼ëŠ” ìˆ˜í˜¸ì²œì‚¬ ê·¤ ISFJ ğŸŠ",
    desc: "ì‚¬ëŒë“¤ì—ê²Œ ë”°ëœ»í•˜ê³  ë°°ë ¤ì‹¬ ê¹Šì€ ê·¤. ì–¸ì œë‚˜ ë‹¤ë¥¸ ì‚¬ëŒë“¤ì˜ í–‰ë³µì„ ë¨¼ì € ìƒê°í•˜ë©°, ì°©í•˜ê³  ì˜¨í™”í•œ ì„±ê²©ìœ¼ë¡œ ì£¼ë³€ì„ ë°ê²Œ ë§Œë“¤ì–´ìš”.",
    img: "cardsISFJ.png",
    caption: "í•­ìƒ ë„ˆë¥¼ ì±™ê²¨ì¤„ê²Œ, ë‚˜ëŠ” ê·¤ë“¤ì˜ ìˆ˜í˜¸ì²œì‚¬ì•¼!"
  },
  INFJ: {
    text: "ì¡°ìš©íˆ ì‚¬ìƒ‰í•˜ëŠ” í˜„ì ê·¤ INFJ ğŸŠ",
    desc: "ê¹Šì€ ìƒê°ê³¼ ì² í•™ì ì¸ ì„±ê²©ì„ ê°€ì§„ ê·¤. ê·¤ë“¤ì˜ ë‚´ë©´ì„ ì´í•´í•˜ë ¤ê³  í•˜ê³ , ì„¸ìƒì— ë” ë‚˜ì€ ë³€í™”ê°€ ì¼ì–´ë‚˜ê¸¸ ë°”ë¼ëŠ” ê·¤ì´ì—ìš”. ê°ì„±ì ì´ê³  ì§€í˜œë¡œìš´ ì„±ê²©.",
    img: "cardsINFJ.png",
    caption: "ê¿ˆê¾¸ëŠ” ê·¤ë“¤ì˜ ë§ˆìŒì„ ì´í•´í•˜ëŠ” í˜„ì ê·¤!"
  },
  INFP: {
    text: "ìƒˆë²½ ê°ì„± ë³„ë¹› ê·¤ INFP ğŸŠ",
    desc: "ì„¸ìƒì—ì„œ ê°€ì¥ ìˆœìˆ˜í•˜ê³  ì´ìƒì ì¸ ë³„ê·¤! ë…íŠ¹í•œ ìƒìƒë ¥ê³¼ ì°½ì˜ë ¥ì„ ìë‘í•˜ë©°, ì´ìƒì ì¸ ì„¸ìƒì— ëŒ€í•œ ê¿ˆì„ ê°€ì§€ê³  ìˆì–´ìš”. ê°ìˆ˜ì„±ì´ í’ë¶€í•˜ê³  ì˜ˆìˆ ì ì¸ ì„±ê²©.",
    img: "cardsINFP.png",
    caption: "ë‚´ ì•ˆì˜ ë³„ì²˜ëŸ¼ ë¹›ë‚˜ëŠ” ê°ì„± ê·¤.."
  },
  ESTP: {
    text: "ìŠ¤ë¦´ ë§Œë½ ëª¨í—˜ê°€ ê·¤ ESTP ğŸŠ",
    desc: "ëª¨í—˜ ê·¤ì€ ì–¸ì œë‚˜ ë„ì „ì ì´ê³ , ì§ê´€ì ìœ¼ë¡œ ì›€ì§ì´ëŠ” íƒ€ì…! ìê·¹ì ì¸ ê²½í—˜ì„ ì¶”êµ¬í•˜ë©°, í˜„ì‹¤ì ì¸ ë¬¸ì œ í•´ê²°ì— ëŠ¥ìˆ™í•˜ê³ , ì‹ ì†í•˜ê²Œ ê²°ë‹¨ì„ ë‚´ë¦¬ëŠ” ì„±ê²©ì…ë‹ˆë‹¤.",
    img: "cardsESTP.png",
    caption: "ë¬´ëŒ€ ìœ„ì˜ ì£¼ì¸ê³µ! ëª¨í—˜ì´ í¼ì³ì§„ë‹¤!"
  },
  ESFP: {
    text: "í¥ í­ë°œ ëŒ„ìŠ¤ íŒŒí‹° ê·¤ ESFP ğŸŠ",
    desc: "íŒŒí‹° ê·¤ì€ ì–¸ì œë‚˜ ì–´ë””ì„œë‚˜ ì¦ê±°ìš´ ë¶„ìœ„ê¸°ë¥¼ ë§Œë“¤ì–´ê°€ëŠ” ê·¤. ì‚¬ëŒë“¤ê³¼ í•¨ê»˜ ìˆìœ¼ë©´ ìµœê³ ì˜ íŒŒí‹°ê°€ í¼ì³ì§€ê³ , ì–¸ì œë‚˜ ì›ƒìŒì´ ëŠì´ì§€ ì•Šì•„ìš”. ì—ë„ˆì§€ ë„˜ì¹˜ê³  ìœ ì¾Œí•œ ì„±ê²©!",
    img: "cardsESFP.png",
    caption: "ë‚´ê°€ ìˆëŠ” ê³³ì—” íŒŒí‹°ê°€ ìˆì–´! íŒŒí‹° ê·¤ì´ë‹ˆê¹Œ!"
  },
  ENTP: {
    text: "ë…¼ë¦¬ì ì¸ ì•„ì´ë””ì–´ ë±…í¬ ê·¤ ENTP ğŸŠ",
    desc: "ì•„ì´ë””ì–´ê°€ ë„˜ì¹˜ëŠ” ì•„ì´ë””ì–´ ê·¤! ì–¸ì œë‚˜ ìƒˆë¡œìš´ ìƒê°ê³¼ ë„ì „ì„ ì¦ê¸°ë©°, ë…¼ë¦¬ì ì´ê³  ì°½ì˜ì ì¸ ë°©ì‹ìœ¼ë¡œ ë¬¸ì œë¥¼ í•´ê²°í•˜ëŠ” ëŠ¥ë ¥ìì…ë‹ˆë‹¤. ë‹¤ì–‘í•œ ê´€ì ì—ì„œ ìƒê°ì„ í¼ì³ìš”.",
    img: "cardsENTP.png",
    caption: "ì–´ë–¤ ë¬¸ì œë“  ì•„ì´ë””ì–´ë¡œ í•´ê²°! ì•„ì´ë””ì–´ ê·¤, ë†€ë¼ìš´ ë°œìƒ!"
  },
  INTP: {
    text: "ì´ìƒí•œ ì‹¤í—˜ì‹¤ì˜ ê´´ì§œ ê·¤ INTP ğŸŠ",
    desc: "ë…¼ë¦¬ ê·¤ì€ í•­ìƒ ì´ì„±ì ìœ¼ë¡œ ìƒê°í•˜ë©°, ì„¸ìƒì„ ë¶„ì„í•˜ëŠ” ì„±ê²©. ì‹¤ìš©ì ì´ê³  ì°½ì˜ì ì¸ ì‚¬ê³ ë¡œ ìƒˆë¡œìš´ ì•„ì´ë””ì–´ë¥¼ ì°½ì¶œí•˜ëŠ” ëŠ¥ë ¥ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.",
    img: "cardsINTP.png",
    caption: "ëª¨ë“  ê±¸ ë¶„ì„í•˜ëŠ” ë°•ì‚¬ ê·¤, ì§„ì‹¤ì„ ë°í˜€ë‚¼ ê±°ì•¼!"
  },
  ISFP: {
    text: "ì˜ˆìˆ í˜¼ ê°€ë“ íŒ”ë ˆíŠ¸ ê·¤ ISFP ğŸŠ",
    desc: "ì•„íŠ¸ ê·¤ì€ ì˜ˆìˆ ì ì¸ ì„±ê²©ì„ ê°€ì§„ ê·¤ë¡œ, ìì—°ê³¼ ì˜ˆìˆ ì— ëŒ€í•œ ê¹Šì€ ì• ì •ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤. ê°ì„±ì ì´ê³ , ììœ ë¡œìš´ ìŠ¤íƒ€ì¼ë¡œ í•­ìƒ ìì‹ ë§Œì˜ ê¸¸ì„ ê°‘ë‹ˆë‹¤.",
    img: "cardsISFP.png",
    caption: "ë‚˜ë§Œì˜ ìƒ‰ê¹”ë¡œ ì„¸ìƒì„ ë¬¼ë“¤ì—¬ì£¼ëŠ” ì•„íŠ¸ ê·¤!"
  },
  ISTP: {
    text: "ì²™ì²™ë°•ì‚¬ ë§ŒëŠ¥ ê·¤ ISTP ğŸŠ",
    desc: "ë§ŒëŠ¥ ê·¤ì€ í•­ìƒ ìƒˆë¡œìš´ ê²ƒì„ ì‹œë„í•˜ê³ , í˜„ì‹¤ì ì¸ ë¬¸ì œ í•´ê²°ì— ë›°ì–´ë‚œ ëŠ¥ë ¥ì„ ê°€ì§„ ê·¤. ëª¨í—˜ì„ ì¦ê¸°ë©°, ì‹¤ìš©ì ì´ê³  ë…ë¦½ì ì¸ ì„±ê²©ì…ë‹ˆë‹¤.",
    img: "cardsISTP.png",
    caption: "ëª¨í—˜ì„ ë– ë‚  ì¤€ë¹„ ì™„ë£Œ! ë§ŒëŠ¥ ê·¤ê³¼ í•¨ê»˜!"
  },
  INTJ: {
    text: "ë¬´ë¥¼ ë•Œê¹Œì§€ ë‚´ë‹¤ ë³´ëŠ” ê³„ëµê°€ ê·¤ INTJ ğŸŠ",
    desc: "ì „ëµ ê·¤ì€ í•­ìƒ ë¯¸ë˜ë¥¼ ê³„íší•˜ê³ , ëª©í‘œë¥¼ ë‹¬ì„±í•˜ê¸° ìœ„í•œ ì „ëµì„ ì„¸ìš°ëŠ” ì„±ê²©ì…ë‹ˆë‹¤. ë…¼ë¦¬ì ì´ê³  ë¶„ì„ì ì´ë©°, ëƒ‰ì² í•œ íŒë‹¨ë ¥ì„ ê°€ì§„ ê·¤ì…ë‹ˆë‹¤.",
    img: "cardsINTJ.png",
    caption: "ë‚´ ëª©í‘œëŠ” í™•ì‹¤í•˜ë‹¤! ì „ëµ ê·¤ì´ ì´ë„ëŠ” ê¸¸!"
  },
  ENTJ: {
    text: "ê·¤ ë†ì¥ CEO ê·¤ ENTJ ğŸŠ",
    desc: "ì¹´ë¦¬ìŠ¤ë§ˆ ë„˜ì¹˜ê³ , ë­ë“  ì§ì ‘ í•´ë‚´ëŠ” ë¦¬ë”ì‹­ ê°•í•œ ê·¤. ì²´í—˜ì¥ ê°€ëŠ” ì°¨ ì•ˆì—ì„œ ê·¤ ë†ì¥ ì°½ì—… ê³„íš ì„¸ìš°ëŠ” ì•¼ë§ê·¤.",
    img: "cardsENTJ.png",
    caption: "ê·¤ ì œêµ­ì€ ë‚´ê°€ ì„¸ìš´ë‹¤!!!!!"
  }
};

    /* ===============================
       2) ê¸°ë³¸ê°’(ìœ íš¨í•˜ì§€ ì•Šì„ ë•Œ ì‚¬ìš©)
       =============================== */
    const DEFAULT_RESULT = {
      text: "ê²°ê³¼ ì¤€ë¹„ì¤‘ ğŸŠ",
      desc: "ìœ íš¨í•œ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤. ì²˜ìŒ í™”ë©´ìœ¼ë¡œ ëŒì•„ê°€ í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•´ì£¼ì„¸ìš”.",
      img: "cards/default.png",
    };

    /* ===============================
       3) MBTI ì†ŒìŠ¤ ê²°í•© ìœ í‹¸
       - ìš°ì„ ìˆœìœ„: URL ?mbti=TYPE > localStorage('mbti')
       - URL ì •ê·œí™”: storageì—ì„œ ê°€ì ¸ì˜¨ ê²½ìš°ì—ë„ replaceStateë¡œ URLì— mbti ë°˜ì˜
       =============================== */
    function getMBTIAndNormalizeURL() {
      let mbti = null;
      try {
        const url = new URL(location.href);
        const q = url.searchParams.get("mbti");
        const fromQuery = q ? q.toUpperCase().trim() : null;
        const fromStorage =
          (window.localStorage && localStorage.getItem("mbti")) || null;

        // ìœ íš¨ì„± ê²€ì‚¬
        if (fromQuery && RESULTS[fromQuery]) {
          mbti = fromQuery;
        } else if (fromStorage && RESULTS[fromStorage]) {
          mbti = fromStorage;
          // URLì— ì¿¼ë¦¬ ì—†ìœ¼ë©´ ë³´ì •
          if (url.searchParams.get("mbti") !== mbti) {
            url.searchParams.set("mbti", mbti);
            history.replaceState(null, "", url.toString());
          }
        }
      } catch {
        // URL íŒŒì‹± ì‹¤íŒ¨ ì‹œ mbti=null ìœ ì§€
      }
      return mbti; // ìœ íš¨í•˜ì§€ ì•Šìœ¼ë©´ null
    }

    /* ===============================
       4) ì´ë¯¸ì§€ ì„ ë¡œë”©
       - ì´ˆê¸° í‘œì‹œ ì§€ì—° ìµœì†Œí™”
       - ëˆ„ë½ ì´ë¯¸ì§€ ì¡°ê¸° ê²€ì¶œ ê°€ëŠ¥
       =============================== */
    (function preloadImages() {
      const list = Object.values(RESULTS)
        .map((r) => r.img)
        .concat([DEFAULT_RESULT.img, "cards/preview.png"]);
      list.forEach((src) => {
        const img = new Image();
        img.src = src;
      });
    })();

    /* ===============================
       5) ë Œë” í•¨ìˆ˜
       - DOM ìš”ì†Œ ì£¼ì…
       - ì´ë¯¸ì§€ í´ë°± 1íšŒë§Œ í—ˆìš©
       - ê³µìœ /ë³µì‚¬ í•¸ë“¤ëŸ¬ ë°”ì¸ë”©
       - ê¸°ë³¸ ê²°ê³¼ì¼ ë•Œ robots: noindex ì„¤ì •
       =============================== */
    function render() {
      const mbti = getMBTIAndNormalizeURL();
      const data = mbti ? RESULTS[mbti] : DEFAULT_RESULT;

      // ìš”ì†Œ ì°¸ì¡°
      const $text = document.getElementById("result-text");
      const $desc = document.getElementById("result-desc");
      const $img = document.getElementById("result-img");
      const $notice = document.getElementById("notice");
      const $shareBtn = document.getElementById("shareBtn");
      const $copyBtn = document.getElementById("copyBtn");
      const $retakeBtn = document.getElementById("retakeBtn");
      const $caption = document.getElementById("result-caption");

      // ê¸°ë³¸ ê²°ê³¼ë©´ SEO ì°¨ë‹¨
      if (!mbti) {
        let meta = document.querySelector('meta[name="robots"]');
        if (!meta) {
          meta = document.createElement("meta");
          meta.name = "robots";
          document.head.appendChild(meta);
        }
        meta.setAttribute("content", "noindex,nofollow");
      }

      // ì½˜í…ì¸  ì£¼ì…
      $text.textContent = mbti ? data.text : DEFAULT_RESULT.text;
      $desc.textContent = mbti ? data.desc : DEFAULT_RESULT.desc;
      $img.src = data.img;
      $img.alt = mbti ? `${mbti} ê²°ê³¼ ì¹´ë“œ` : "ê¸°ë³¸ ê²°ê³¼ ì¹´ë“œ";
      $caption.textContent = data.caption || ""; // ì‚¬ì§„ ì•„ë˜ ì„¤ëª… ì¶œë ¥

      // ì´ë¯¸ì§€ í´ë°±: ë¬´í•œ ë£¨í”„ ë°©ì§€
      let failedOnce = false;
      $img.onerror = () => {
        if (failedOnce) return;
        failedOnce = true;
        $img.src = DEFAULT_RESULT.img;
      };

      // ê³µìœ ìš© URL: í˜„ì¬ URL ì‚¬ìš©
      const shareURL = new URL(location.href);
      if (mbti) {
        $notice.textContent = `ê³µìœ  ë§í¬: ${shareURL.toString()}`;
      } else {
        $notice.textContent = "ìœ íš¨í•œ MBTIê°€ ì—†ì–´ ê¸°ë³¸ ê²°ê³¼ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.";
      }

      // ë²„íŠ¼ í•¸ë“¤ëŸ¬ ì—°ê²°
      $retakeBtn.onclick = () => {
        // í…ŒìŠ¤íŠ¸ ì‹œì‘ í˜ì´ì§€ë¡œ ì´ë™
        location.href = "index.html";
      };

      $shareBtn.onclick = async () => {
        // ì´ì¤‘ í´ë¦­ ë°©ì§€
        if ($shareBtn.disabled) return;
        $shareBtn.disabled = true;
        $shareBtn.setAttribute("aria-busy", "true");

        try {
          const shareData = {
            title: "í™©ê°ì œ MBTI í…ŒìŠ¤íŠ¸",
            text: mbti
              ? `ë‚´ ê²°ê³¼ëŠ” ${mbti} ğŸŠ â€” ${data.text}`
              : "í™©ê°ì œ MBTI í…ŒìŠ¤íŠ¸",
            url: shareURL.toString(),
          };

          if (navigator.share) {
            await navigator.share(shareData);
            console.info("shared", mbti);
          } else {
            alert("ì›¹ ê³µìœ  ë¯¸ì§€ì›. 'ë§í¬ ë³µì‚¬í•˜ê¸°'ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.");
          }
        } catch (e) {
          // ê³µìœ  ì·¨ì†Œ ë˜ëŠ” ì‹¤íŒ¨
          console.info("share failed", e);
          alert("ê³µìœ ê°€ ì·¨ì†Œë˜ì—ˆê±°ë‚˜ ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
        } finally {
          $shareBtn.disabled = false;
          $shareBtn.removeAttribute("aria-busy");
        }
      };

      $copyBtn.onclick = async () => {
        // í´ë¦½ë³´ë“œ API ìš°ì„  ì‹œë„
        try {
          await navigator.clipboard.writeText(shareURL.toString());
          $notice.textContent = "ë§í¬ë¥¼ í´ë¦½ë³´ë“œì— ë³µì‚¬í–ˆìŠµë‹ˆë‹¤.";
        } catch {
          // iOS/êµ¬í˜• ë¸Œë¼ìš°ì € ëŒ€ì²´ ë£¨í‹´
          const tmp = document.createElement("textarea");
          tmp.value = shareURL.toString();
          tmp.setAttribute("readonly", "");
          tmp.style.position = "absolute";
          tmp.style.left = "-9999px";
          document.body.appendChild(tmp);
          tmp.select();
          document.execCommand("copy");
          document.body.removeChild(tmp);
          $notice.textContent = "ë§í¬ë¥¼ ë³µì‚¬í–ˆìŠµë‹ˆë‹¤.";
        }
      };
    }

    // ìµœì´ˆ ë Œë”
    render();
  </script>
</body>
</html>
